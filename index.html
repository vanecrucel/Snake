<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Java Applet - CheerpJ</title>
    
    <script src="https://cjrtnc.leaningtech.com/cjrt/main.js"></script> 
    
    <script>
    // Variable para almacenar el ID del DIV donde inyectaremos el juego
    const targetDivId = "cheerpj_target";
    
    // Función de inicialización que usa un bucle para esperar a CheerpJ
    function waitForCheerpj() {
        // Chequear cada 500ms si la función existe
        const checkInterval = setInterval(function() {
            // CRÍTICO: Comprobar si la función cheerpjRunApplet está definida
            if (typeof cheerpjRunApplet === 'function') {
                clearInterval(checkInterval); // Detener el chequeo
                
                // 1. Ocultar el mensaje de "cargando..." si quieres
                // document.getElementById(targetDivId).innerHTML = "Iniciando juego..."; 

                // 2. Lanzar el Applet de forma robusta
                cheerpjRunApplet(targetDivId, "Snake.class", 600, 450, 
                                 {archive: "Snake.jar", code: "Snake.class", jar: "Snake.jar"});
                }
            }, 500); // Chequea cada medio segundo
        }
    
    // Iniciar la espera activa tan pronto como el DOM esté listo
        document.addEventListener('DOMContentLoaded', waitForCheerpj);
    </script>
    
    </head>

<body > <h1>Snake - Clásico Applet de Java</h1>
    
    <div id="cheerpj_target">
        El juego está cargando. Espere un momento...
    </div>

    <p>Utiliza las teclas de flecha o WASD para jugar.</p>
    
</body>
</html>